<div class="file-list-container">
    <div class="list-header">
        <h2 class="section-title">Mes fichiers</h2>

        <div class="filters">
            <button [class.active]="filter === 'all'" (click)="setFilter('all')">Tous</button>
            <button [class.active]="filter === 'active'" (click)="setFilter('active')">Actifs</button>
            <button [class.active]="filter === 'expired'" (click)="setFilter('expired')">ExpirÃ©</button>
        </div>
    </div>

    <div *ngIf="message" class="alert alert-success">{{ message }}</div>

    <div class="files-rows">
        <div class="file-row" *ngFor="let file of filteredFiles" [class.expired]="isExpired(file)">
            <div class="file-icon">
                ğŸ“„ <!-- Could be dynamic based on extension -->
            </div>

            <div class="file-details">
                <div class="file-name">{{ file.originalName }}</div>
                <div class="file-status" [class.status-expired]="isExpired(file)">
                    {{ getExpirationText(file) }}
                </div>
            </div>

            <div class="spacer"></div>

            <div class="file-status-text" *ngIf="isExpired(file)">
                Ce fichier Ã  expirÃ©, il n'est plus stockÃ© chez nous
            </div>

            <div class="file-actions" *ngIf="!isExpired(file)">
                <button class="btn-action delete" (click)="openDeleteModal(file.id)">
                    ğŸ—‘ï¸ Supprimer
                </button>
                <button class="btn-action share" (click)="copyLink(file.shareToken, $event)">
                    ğŸ”— Copier le lien
                </button>
            </div>
            <!-- Allow delete even if expired to clean up list -->
            <div class="file-actions" *ngIf="isExpired(file)">
                <button class="btn-action delete" (click)="openDeleteModal(file.id)">
                    ğŸ—‘ï¸ Supprimer
                </button>
            </div>
        </div>

        <div *ngIf="filteredFiles.length === 0" class="empty-state">
            Aucun fichier correspondant.
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal-overlay" *ngIf="showDeleteModal" (click)="cancelDelete()">
        <div class="modal-card" (click)="$event.stopPropagation()">
            <h3>Confirmer la suppression</h3>
            <p>ÃŠtes-vous sÃ»r de vouloir supprimer ce fichier ? Cette action est irrÃ©versible.</p>
            <div class="modal-actions">
                <button class="btn-cancel" (click)="cancelDelete()">Annuler</button>
                <button class="btn-confirm" (click)="confirmDelete()">Oui, supprimer</button>
            </div>
        </div>
    </div>
</div>